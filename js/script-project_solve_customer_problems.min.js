function project_solve_customer_problems(){let i=!1,t=!1;const d=sessionStorage.getItem("show_all");"1"===d&&(show_all_questions(),sessionStorage.removeItem("show_all"));const l=new URLSearchParams(window.location.search);"box_paper"===l.get("from")?$("#special_message").show():$("#special_message").hide(),$("#start_survey").on("click",function(){if(!$('input[name="field_5286761"]').is(":checked"))return $("#checkbox_error").fadeIn(400),void e.preventDefault();$("#checkbox_error").fadeOut(400),$(".basic_info").fadeIn(400),$("#q1").fadeIn(400),$(this).hide()}),$('input[name="field_5286761"]').on("change",function(){$('input[name="field_5286761"]').is(":checked")&&$("#checkbox_error").fadeOut(100)}),$('input[type="checkbox"]').on("change",function(){const e=$('input[name="field_5283232"]:checked').val();checkQ2Q3Answered(e)}),$("select[name='field_5141573'], select[name='field_5141575'], select[name='field_5141586'], select[name='field_5141587']").on("change",function(){$(this).removeClass("error")}),$("#project_solve_customer_problems form").validate({rules:{field_5286761:{required:!0},field_5281288:{required:!0},field_5281289:{required:!0},field_5281290:{required:!0},field_5281291:{required:!0},field_5281292:{required:!0},field_5281294:{required:!0},field_5281320:{required:!0},field_5281504:{required:!0},field_5281505:{required:!0},field_5283232:{required:!0},field_5281507:{required:!0},field_5281508:{required:!0},field_5281559:{required:!0},field_5281560:{required:!0},field_5281561:{required:!0},field_5281562:{required:!0},field_5281563:{required:!0,email:!0}},messages:{field_5286761:{required:"チェックを入れてください"},field_5281288:{required:"選択してください"},field_5281289:{required:"選択してください"},field_5281290:{required:"選択してください"},field_5281291:{required:"選択してください"},field_5281292:{required:"選択してください"},field_5281294:{required:"選択してください"},field_5281320:{required:"選択してください"},field_5281504:{required:"選択してください"},field_5281505:{required:"選択してください"},field_5283232:{required:"選択してください"},field_5281507:{required:"選択してください"},field_5281508:{required:"選択してください"},field_5281559:{required:"選択してください"},field_5281560:{required:"入力してください"},field_5281561:{required:"入力してください"},field_5281562:{required:"選択してください"},field_5281563:{required:"メールアドレスを入力してください",email:"正しいメールアドレスを入力してください"}},errorPlacement:function(e,i){"field_5281559"===i.attr("name")||"field_5283232"===i.attr("name")?i.closest("td").append(e):"field_5286761"===i.attr("name")?$("#checkbox_error").css("display","block"):i.closest("td").append(e)},submitHandler:function(e){e.submit(),sessionStorage.setItem("from_confirm_page","true")}});const s={0:{titleSelector:"tr.living",fields:["field_5281507","field_5281508"]},1:{titleSelector:"tr.kitchen",fields:["field_5281509","field_5281510"]},2:{titleSelector:"tr.dining",fields:["field_5281511","field_5281512"]},3:{titleSelector:"tr.bedroom",fields:["field_5281522","field_5281529"]},4:{titleSelector:"tr.children_room",fields:["field_5281530","field_5281531"]},5:{titleSelector:"tr.entrance",fields:["field_5281532","field_5281533"]},6:{titleSelector:"tr.bathroom",fields:["field_5281534","field_5281552"]},7:{titleSelector:"tr.toilet",fields:["field_5281553","field_5281554"]},8:{titleSelector:"tr.closet",fields:["field_5281555","field_5281557"]}};let r=$('input[name="field_5283232"]:checked').val()||null;$('input[name="field_5283232"]').on("change",function(){const e=$(this).val();$('input[name="field_5283232"]:checked').val();r=e;const t=["field_5281507","field_5281508","field_5281509","field_5281510","field_5281511","field_5281512","field_5281522","field_5281529","field_5281530","field_5281531","field_5281532","field_5281533","field_5281534","field_5281552","field_5281553","field_5281554","field_5281555","field_5281557","field_5281559","field_5281560","field_5281561","field_5281562","field_5281563"];t.forEach(function(e){const i=$('tr:has([name="'+e+'"])');i.hide();const t=$('[name="'+e+'"]');t.is(":radio")||t.is(":checkbox")?t.prop("checked",!1):t.val("")}),$("tr.section-title").hide(),$("tr.solution_place").hide(),$("tr.recruit_supporter").hide(),$("#submit_button").hide();const d=s[e];d?($(d.titleSelector).css("display","table-row").hide().fadeIn(400),$(".qnum-q4").text("Q4"),$(".qnum-q5").text("Q5"),$(".qnum-q6").text("Q6"),d.fields.forEach(function(e,i){const t=$('tr:has([name="'+e+'"])');t.css("display","table-row").hide().fadeIn(400)})):"9"===e&&show_Q4_onward(),i=!0});$('input[name="field_5281559"]:checked').val();$('input[name="field_5281559"]').on("change",function(){$('input[name="field_5281559"]:checked').val();$('input[name="field_5281560"]').prop("checked",!1),$('textarea[name="field_5281561"]').val(""),$('input[name="field_5281562"]').prop("checked",!1),$('input[name="field_5281563"]').val(""),$('tr:has([name="field_5281560"])').hide(),$('tr:has([name="field_5281561"])').hide(),$('tr:has([name="field_5281562"])').hide(),$('tr:has([name="field_5281563"])').hide(),$("tr.recruit_supporter").hide(),$("tr.solution_place").hide(),$("#submit_button").hide(),t=!0;const e=$('tr:has([name="field_5281560"])'),i=$('tr:has([name="field_5281561"])'),d=$("tr.solution_place");e.fadeOut(200),i.fadeOut(200);const l=$(this).val();if("0"===l){e.css("display","table-row").hide().fadeIn(400),i.css("display","table-row").hide().fadeIn(400);const t=$("tr.solution_place");t.css("display","table-row").hide().fadeIn(400)}else d.fadeOut(200);check_show_Q7_Q8()}),$('input[name="field_5281560"], textarea[name="field_5281561"]').on("input",function(){check_show_Q7_Q8()}),$("#submit_button").on("click",function(){save_answered_questions(),$("#project_solve_customer_problems form").submit()});const n=$('input[name="field_5281559"]:checked').val();if(n){$('input[name="field_5281560"]').val(),$('textarea[name="field_5281561"]').val();"0"===n&&($("tr.solution_place").css("display","table-row"),$('tr:has([name="field_5281560"])').css("display","table-row"),$('tr:has([name="field_5281561"])').css("display","table-row")),check_show_Q7_Q8()}}function checkQ2Q3Answered(e){const i={0:["field_5281507","field_5281508"],1:["field_5281509","field_5281510"],2:["field_5281511","field_5281512"],3:["field_5281522","field_5281529"],4:["field_5281530","field_5281531"],5:["field_5281532","field_5281533"],6:["field_5281534","field_5281552"],7:["field_5281553","field_5281554"],8:["field_5281555","field_5281557"]},t=i[e];if(!t)return;const d=$(`input[name="${t[0]}"]:checked`).length>0,l=$(`input[name="${t[1]}"]:checked`).length>0;d&&l&&(show_Q4_onward(),$(".qnum-q4").text("Q4"),$(".qnum-q5").text("Q5"),$(".qnum-q6").text("Q6"))}function show_Q4_onward(){const e=["field_5281559"],i=$("tr.mysolution");i.css("display","table-row").hide().fadeIn(400),$(".qnum-q4").text("Q2"),$(".qnum-q5").text("Q3"),$(".qnum-q6").text("Q4"),e.forEach((e,i)=>{const t=$(`tr:has([name="${e}"])`);t.css("display","table-row").hide().fadeIn(400)})}function check_show_Q7_Q8(){const e=$('input[name="field_5281559"]:checked').val(),i=$('input[name="field_5281560"]').val(),t=$('textarea[name="field_5281561"]').val(),d=$('tr:has([name="field_5281562"])'),l=$('tr:has([name="field_5281563"])'),s=$("tr.recruit_supporter");"0"===e&&""!==i.trim()&&""!==t.trim()?(d.is(":visible")||d.css("display","table-row").hide().fadeIn(400),l.is(":visible")||l.css("display","table-row").hide().fadeIn(400),s.is(":visible")||s.css("display","table-row").hide().fadeIn(400),$("#submit_button").css("display","block")):"1"!==e&&"2"!==e||(s.css("display","table-row").hide().fadeIn(400),d.css("display","table-row").hide().fadeIn(400),l.css("display","table-row").hide().fadeIn(400),$("#submit_button").css("display","block"))}function save_answered_questions(){const e=[];$("#project_solve_customer_problems").find("input, textarea, select").each(function(){const i=$(this),t=i.attr("name");t&&(i.is(":checkbox")||i.is(":radio")?i.is(":checked")&&e.push(t):i.val()&&""!==i.val().trim()&&e.push(t))});const i=[...new Set(e)];sessionStorage.setItem("answeredFields",JSON.stringify(i))}function restore_answered_questions(){const e=sessionStorage.getItem("answeredFields");if(!e)return;const i=JSON.parse(e);i.forEach(e=>{const i=$(`tr:has([name="${e}"])`);i.length&&i.css("display","table-row"),"field_5281559"===e&&$("tr.mysolution").css("display","table-row"),"field_5281562"!==e&&"field_5281563"!==e||$("tr.recruit_supporter").css("display","table-row")}),$(".basic_info").show(),$("#q1").show(),$("#submit_button").css("display","block"),sessionStorage.removeItem("answeredFields")}$(function(){project_solve_customer_problems(),restore_answered_questions()});