function tnl_em_introduction(){if(!$("#tnl-em-introduction").length)return;let url="https://h15yyu8zof.execute-api.ap-northeast-1.amazonaws.com/prod/get_sum_review_v3",params_sum_review={sku_no:"TNL-EM"};$.ajax({type:"post",url:url,data:JSON.stringify(params_sum_review),contentType:"application/json",dataType:"json",scriptCharset:"utf-8",success:function(sum_review){build_review_summary(sum_review)},error:function(response){console.error("レビュー取得エラー",response)}})}function build_review_summary(sum_review){const number_review=sum_review.number_review;for(let i=5;i>0;i--){let review_count=sum_review["number_review"+i],rate=number_review>0?Math.round(review_count/number_review*100):0;$(".score"+i+" .bar-info").attr("data-total",rate),$(".score"+i+" .rating").html(rate+"%")}function skillSet(){$(".bar-info").each((function(){let total=$(this).data("total");$(this).css("width",total+"%")})),$(".percent").each((function(){let $this=$(this);$({Counter:10}).animate({Counter:$this.text()},{duration:3e3,easing:"swing",step:function(){$this.text(Math.ceil(this.Counter)+"%")}})}))}setTimeout(skillSet,400);const average_score=sum_review.average_rating;let average_score_star=average_score;const series_code="TNL-EM";let model_name;average_score_star<.5?average_score_star="0":average_score_star<1?average_score_star="0.5":average_score_star<1.5?average_score_star="1.0":average_score_star<2?average_score_star="1.5":average_score_star<2.5?average_score_star="2.0":average_score_star<3?average_score_star="2.5":average_score_star<3.5?average_score_star="3.0":average_score_star<4?average_score_star="3.5":average_score_star<4.5?average_score_star="4.0":average_score_star<5?average_score_star="4.5":5==average_score_star&&(average_score_star="5.0");var average_html='<h3 id="totalScoreTitle" style="text-align:center;">タナリオシリーズの総合評価<span class="fs-c-reviewInfo__stars fs-c-reviewStars" data-ratingcount="'+average_score_star+'">'+average_score.toFixed(1)+"（"+sum_review.number_review+"）</span></h3>";$("#averageMultipleReview").append(average_html);let review_combination="TNL-EM,TNL-EMU,TNL-EMTS,TNL-1231-DK,TNL-1231-NA,TNL-1231-WH,TNL-1244-DK,TNL-1244-NA,TNL-1244-WH,TNL-1259-DK,TNL-1259-NA,TNL-1259-WH,TNL-1287-DK,TNL-1287-NA,TNL-1287-WH,TNL-1531-DK,TNL-1531-NA,TNL-1531-WH,TNL-1544-DK,TNL-1544-NA,TNL-1544-WH,TNL-1559-DK,TNL-1559-NA,TNL-1559-WH,TNL-1587-DK,TNL-1587-NA,TNL-1587-WH,TNL-1831-DK,TNL-1831-NA,TNL-1831-WH,TNL-1844-DK,TNL-1844-NA,TNL-1844-WH,TNL-1859-DK,TNL-1859-NA,TNL-1859-WH,TNL-1887-DK,TNL-1887-NA,TNL-1887-WH,TNL-19831-DK,TNL-19831-NA,TNL-19831-WH,TNL-19844-DK,TNL-19844-NA,TNL-19844-WH,TNL-19859-DK,TNL-19859-NA,TNL-19859-WH,TNL-19887-DK,TNL-19887-NA,TNL-19887-WH,TNL-60117-DK,TNL-60117-NA,TNL-60117-WH,TNL-6031-DK,TNL-6031-NA,TNL-6031-WH,TNL-6044-DK,TNL-6044-NA,TNL-6044-WH,TNL-6059-DK,TNL-6059-NA,TNL-6059-WH,TNL-6087-DK,TNL-6087-NA,TNL-6087-WH,TNL-90117-DK,TNL-90117-NA,TNL-90117-WH,TNL-9031-DK,TNL-9031-NA,TNL-9031-WH,TNL-9044-DK,TNL-9044-NA,TNL-9044-WH,TNL-9059-DK,TNL-9059-NA,TNL-9059-WH,TNL-9087-DK,TNL-9087-NA,TNL-9087-WH,TNL-T117A-DK,TNL-T117A-NA,TNL-T117A-WH,TNL-T31A-DK,TNL-T31A-NA,TNL-T31A-WH,TNL-T44A-DK,TNL-T44A-NA,TNL-T44A-WH,TNL-T59A-DK,TNL-T59A-NA,TNL-T59A-WH,TNL-T87A-DK,TNL-T87A-NA,TNL-T87A-WH";var rating_select_html='<select id="selectScore"><option value="">レビュー絞り込み</option>';let star,score_count=0,total_count=0;for(var i=5;i>0;i--)5==i?(star="★★★★★",score_count=sum_review.number_review5):4==i?(star="★★★★☆",score_count=sum_review.number_review4):3==i?(star="★★★☆☆",score_count=sum_review.number_review3):2==i?(star="★★☆☆☆",score_count=sum_review.number_review2):1==i&&(star="★☆☆☆☆",score_count=sum_review.number_review1),rating_select_html=rating_select_html+'<option value="reviewScore-'+i+'">'+star+"（"+score_count+"件）</option>";rating_select_html+='</select><div id="number_display" style="text-align:right;"></div>',$("#reviwRatingBox").after(rating_select_html);let rating=null;getParam("score")&&(rating=getParam("score"),$("#selectScore").val("reviewScore-"+rating));let params_review={queryStringParameters:{sku_no:review_combination,rating:rating,exclusive_start_key:null}},currentPage=1,startKeyAry=[];startKeyAry[0]=null;let nextStartKey=null,prevStartKey=null,exclusive_start_key_ary=[];function display_number_review(currentPage,sum_review){const select_score=$("#selectScore").val(),number_review_display=10*currentPage;let number_review;if(""==select_score)number_review=sum_review.number_review;else{const score=select_score.split("-")[1],key_name="number_review"+score;number_review=sum_review[key_name]}number_review_display>number_review?$("#number_display").html(number_review_display-9+"件目から"+number_review+"件目を表示中（全"+number_review+"件）"):$("#number_display").html(number_review_display-9+"件目から"+number_review_display+"件目を表示中（全"+number_review+"件）")}function get_reviews(params_review){$("#review_loading").show(),url="https://h15yyu8zof.execute-api.ap-northeast-1.amazonaws.com/prod/get_review_v3",$.ajax({type:"post",url:url,data:JSON.stringify(params_review),contentType:"application/json",dataType:"text",scriptCharset:"utf-8",success:function(response){reviews=sanitizeString(response);let reviews_json=JSON.parse(reviews);var newWindowWidth;if(reviews_json.items.length>0?reviews_json.items.forEach(item=>{let productUrl=item.sku_no.toLowerCase(),seriesCode=productUrl.slice(0,3),productId=item.product_id,nickname=item.nickname,prefecture=item.area_group,ageGroup=item.age_group,gender=item.gender,reviewScore=item.rating,datetime=item.updated_at.slice(0,10).replace(/-/g,"/"),reviewBody=item.body,productId_12Len=zeroPadding(productId,12),product_image_group=Math.floor(productId/100),thumbnail=("00"+item.thumbnail_number).slice(-2),color=item.review_product_caption,is_monitor;var reviewScoreToFixed=reviewScore;reviewScore<.5?reviewScore="0":reviewScore<1?reviewScore="0.5":reviewScore<1.5?reviewScore="1.0":reviewScore<2?reviewScore="1.5":reviewScore<2.5?reviewScore="2.0":reviewScore<3?reviewScore="2.5":reviewScore<3.5?reviewScore="3.0":reviewScore<4?reviewScore="3.5":reviewScore<4.5?reviewScore="4.0":reviewScore<5?reviewScore="4.5":5==reviewScore&&(reviewScore="5.0");var profHTML="";""==prefecture&&""==ageGroup&&""==gender?profHTML='<span class="fs-c-reviewer__profile__status">非公開</span>':(""!=prefecture&&(profHTML=profHTML+'<span class="fs-c-reviewer__profile__prefecture">'+prefecture+"</span>"),""!=ageGroup&&(profHTML=profHTML+'<span class="fs-c-reviewer__profile__ageGroup">'+ageGroup+"</span>"),""!=gender&&(profHTML=profHTML+'<span class="fs-c-reviewer__profile__gender">'+gender+"</span>")),profHTML='<div class="fs-c-reviewer__profile">'+profHTML+"</div></div>";var reviewerHTML='<div class="fs-c-reviewList__item__info fs-c-reviewInfo"><div class="fs-c-reviewInfo__reviewer fs-c-reviewer"><div class="fs-c-reviewer__name"><span class="fs-c-reviewer__name__nickname">'+nickname+'</span></div><div class="fs-c-reviewer__status"><span class="fs-c-reviewerStatus">購入者</span></div>';if(1==item.is_monitor)var mark_monitor='<span class="mark-monitor">モニターレビュー</span>';else var mark_monitor="";var dateHTML='<dl class="fs-c-reviewInfo__date"><dt>投稿/更新日</dt><dd><time datetime="'+datetime+'" class="fs-c-time">'+datetime+'</time></dd></dl><div class="fs-c-reviewRating"><div class="fs-c-rating__stars fs-c-reviewStars" data-ratingcount="'+reviewScore+'"></div></div>'+mark_monitor+"</div>",colorHTML='<div class="color">'+color+"</div>",review_body,commentHTML='<div class="fs-c-reviewList__item__body fs-c-reviewBody">'+reviewBody.replace(/\n/g,"<br>")+"</div>",imageHTML,h='<li class="fs-c-reviewList__item reviewScore-'+reviewScoreToFixed+'">'+('<div class="reviewImage"><a href="/c/series/'+seriesCode+"/"+productUrl+'"><img src="https://shiraistore.itembox.design/product/'+zeroPadding(product_image_group,3)+"/"+productId_12Len+"/"+productId_12Len+"-"+thumbnail+'-xs.jpg" alt="" ></a></div>')+'<div class="reviewContent">'+reviewerHTML+profHTML+dateHTML+commentHTML+"</div></li>";$("#multipleReviewList ul").append(h)}):$("#multipleReviewList ul").append('<li class="fs-c-reviewList__item no_review">該当するレビューがありません。</li>'),$(window).width()<=480)var maxHeight="360";else var maxHeight="240";if(reviewSlideDown("#multipleReviewList",maxHeight),nextStartKey=reviews_json.exclusive_start_key,null!=rating&&(nextStartKey=Object.fromEntries(Object.entries(nextStartKey).map(([sku,data])=>[sku,{sku_no:data.sku_no,sku_rating:`${sku}_${rating}`,review_id:data.review_id,updated_at:data.updated_at}]))),prevStartKey=startKeyAry[currentPage-2],1===currentPage)startKeyAry[currentPage]=nextStartKey;else{let updatedData={...startKeyAry[currentPage-1]};Object.keys(nextStartKey).forEach(key=>{updatedData[key]=nextStartKey[key]}),startKeyAry[currentPage]=updatedData}currentPage>1?$(".prev-page").show():$(".prev-page").hide(),nextStartKey?$(".next-page").show():$(".next-page").hide(),0===Object.keys(nextStartKey).length?$(".next-page").hide():$(".next-page").show()},error:function(response){},complete:function(){$("#review_loading").hide()}})}function sanitizeString(str){return str.replace(/[\u0000-\u001F\u007F-\u009F]/g,"")}$("#multipleReviewList ul").after('\n\t\t\t\t\t<div class="pagination">\n\t\t\t\t\t\t<span><button class="prev-page" style="display: none;">前へ</button></span>\n\t\t\t\t\t\t<span><button class="next-page" style="display: none;">次へ</button></span>\n\t\t\t\t\t</div>\n\t\t\t\t'),get_reviews(params_review),display_number_review(currentPage,sum_review),$(document).on("click",".next-page",(function(){nextStartKey&&(currentPage++,nextStartKey=startKeyAry[currentPage-1],params_review.queryStringParameters.exclusive_start_key=nextStartKey,$("#multipleReviewList ul").children().remove(),get_reviews(params_review),display_number_review(currentPage,sum_review),$("html, body").animate({scrollTop:$("#selectScore").offset().top-100},500))})),$(document).on("click",".prev-page",(function(){currentPage>1&&(currentPage--,params_review.queryStringParameters.exclusive_start_key=prevStartKey,$("#multipleReviewList ul").children().remove(),get_reviews(params_review),display_number_review(currentPage,sum_review),$("html, body").animate({scrollTop:$("#selectScore").offset().top-100},500))})),$("#selectScore").change((function(){let select_score=$(this).val();rating=parseInt(select_score.charAt(select_score.length-1)),rating?params_review={queryStringParameters:{sku_no:review_combination,rating:rating}}:(params_review={queryStringParameters:{sku_no:review_combination,rating:rating,exclusive_start_key:null}},rating=null),currentPage=1,startKeyAry=[],startKeyAry[0]=null,nextStartKey=null,prevStartKey=null,$("#multipleReviewList ul").children().remove(),get_reviews(params_review),display_number_review(currentPage,sum_review)}))}function tnl_em_select(){if($("#tnl_em").length){function tnl_em_select_write(priceArray){var readyMadeFlag_Message="",readyMadeFlag_check,readyMadeFlag_width=0,readyMadeFlag_depth=0,readyMadeFlag_strength=0,readyMadeFlag_material=0,readyMadeFlag_color=0,optionHeight=$("#tnl_em [name=tnl_em_optionHeight]").val(),optionHeightName=$("#tnl_em [name=tnl_em_optionHeight] option:selected").data("typename"),optionWidth=$("#tnl_em [name=tnl_em_optionWidth]").val(),optionDepth=$("#tnl_em [name=tnl_em_optionDepth]:checked").val(),optionDepthName=$("#tnl_em [name=tnl_em_optionDepth]:checked").data("typename"),optionStrength=$("#tnl_em [name=tnl_em_optionStrength]:checked").val(),optionStrengthName=$("#tnl_em [name=tnl_em_optionStrength]:checked").data("typename"),optionMaterial=$("#tnl_em [name=tnl_em_optionMaterial]:checked").val(),optionMaterialName=$("#tnl_em [name=tnl_em_optionMaterial]:checked").data("typename"),optionColor=$("#tnl_em [name=tnl_em_optionColor]:checked").val(),optionColorName=$("#tnl_em [name=tnl_em_optionColor]:checked").data("colorname"),optionColor_length=$("#tnl_em input[name=tnl_em_optionColor]").length,optionADIS=$("#tnl_em [name=tnl_em_optionADIS]").val(),optionADISName=$("#tnl_em [name=tnl_em_optionADIS] option:selected").data("typename"),arraySizeRange,arraySizeRangeValue=["015_034","035_044","045_060","061_070","071_080","081_090"][$("#tnl_em [name=tnl_em_optionWidth] option:selected").data("digit2")-1],productSizeImage=0,optionDepthSize;switch(sku_no="TNL-EM"+optionHeight+optionWidth+optionDepth+optionStrength+optionMaterial,"031"!=optionWidth&&"044"!=optionWidth&&"059"!=optionWidth&&"087"!=optionWidth||(readyMadeFlag_width=1),optionDepth){case"A":optionDepthSize=19;break;case"M":optionDepthSize=29;break;case"F":optionDepthSize=44}if("M"==optionDepth?(readyMadeFlag_depth=1,$("#tnl_em input[name=tnl_em_optionColor]").parent("label").css("display","block")):readyMadeFlag_depth=0,"T"==optionStrength?(readyMadeFlag_strength=1,$("#tnl_em input[name=tnl_em_optionColor]").parent("label").css("display","block")):readyMadeFlag_strength=0,"F2"==optionMaterial)readyMadeFlag_material=1,$("#tnl_em input[name=tnl_em_optionColor]").parent("label").css("display","block");else{readyMadeFlag_material=0;for(var i=0;i<=optionColor_length;i++)1==i||3==i||5==i?$("#tnl_em input[name=tnl_em_optionColor]").eq(i).parent("label").css("display","block"):$("#tnl_em input[name=tnl_em_optionColor]").eq(i).parent("label").css("display","none");$("#tnl_em input[name=tnl_em_optionColor]").each((function(){"NA"==optionColor||"DK"==optionColor||"WH"==optionColor||$("#tnl_em input[name=tnl_em_optionColor]:eq(1)").prop("checked",!0)})),optionColor=$("#tnl_em [name=tnl_em_optionColor]:checked").val(),optionColorName=$("#tnl_em [name=tnl_em_optionColor]:checked").data("colorname")}switch("NA"!=optionColor&&"DK"!=optionColor&&"WH"!=optionColor||(readyMadeFlag_color=1),arraySizeRangeValue){case"015_034":productSizeImage=31;break;case"035_044":productSizeImage=44;break;case"045_060":productSizeImage=59;break;case"061_070":productSizeImage=67;break;case"071_080":productSizeImage=77;break;case"081_090":productSizeImage=87}if($("#tnl_em_selectedProductImage").html('<img src="/assets/img/product/sizeOrder/tnl-em/TNL-EM'+optionHeight+arraySizeRangeValue+optionDepth+"-"+optionColor+'.jpg">'),$("#tnl_em_selectedProductImageText").html("<p>※画像は横幅"+productSizeImage+"cmです</p>"),$("#tnl_em_selectedProductHeightImage").html('<img src="/assets/img/product/sizeOrder/tnl-em/tnl-em_height'+optionHeight+'.png">'),$("#tnl_em_selectedProductWidthImage").html('<img src="/assets/img/product/sizeOrder/tnl-em/tnl-em_width'+arraySizeRangeValue+'.png">'),$("#tnl_em_selectedHeight").text(optionHeightName+"cm"),$("#tnl_em_selectedWidth").text(Number(optionWidth)+"cm"),$("#tnl_em_selectedDepth").text(optionDepthName),$("#tnl_em_selectedStrength").text(optionStrengthName),$("#tnl_em_selectedMaterial").text(optionMaterialName),$("#tnl_em_selectedADIS").text(optionADISName),"NA"==optionColor||"NB"==optionColor||"WH"==optionColor||"WT"==optionColor||"GY"==optionColor||"LW"==optionColor)var optionTextInversion="textColorInversion";else var optionTextInversion="";$("#tnl_em_selectedColor").html('<img src="/assets/img/product/sizeOrder/tnl-em/thum/tnl-em_color_'+optionColor.toLowerCase()+'_thum.jpg"><span class="colorName '+optionTextInversion+'">'+optionColorName+"</span>");var adjustableSize=9,totalSize=Number(optionHeight)+Number(optionWidth)+optionDepthSize+9,which_selected=$('select[name="tnl_em_optionADIS"] option:selected').val(),adis00_selected="",adis01_selected="",adis02_selected="",adis_name=$('select[name="tnl_em_optionADIS"] option:selected').text();"ADIS-00"==which_selected?(adis00_selected="selected",$(".product_adis").text("")):"ADIS-01"==which_selected?(adis01_selected="selected",$(".product_adis").text(adis_name)):"ADIS-02"==which_selected&&(adis02_selected="selected",$(".product_adis").text(adis_name));var price=get_selection_price(sku_no),selectADISHtml='<option data-typename="なし" value="ADIS-00">なし</option><option data-typename="組組立済+玄関渡し" value="ADIS-01">組立済+玄関渡し</option><option data-typename="組立済+搬入" value="ADIS-02">組立済+搬入</option>',name;$("#tnl_em [name=tnl_em_optionADIS]").html(selectADISHtml),selectADISHtml=Number(optionHeight)+3>200&&totalSize>260?'<option data-typename="なし" value="ADIS-00" selected>なし(+¥0 税込)</option>':Number(optionHeight)+3>200?`<option data-typename="なし" value="ADIS-00" ${adis00_selected}>なし(+¥0 税込)</option><option data-typename="組組立済+玄関渡し" value="ADIS-01" ${adis01_selected}>組立済+玄関渡し(+¥${formatNumberWithComma(price.adis01_selection_selling_price)} 税込)</option>`:totalSize>260?`<option data-typename="なし" value="ADIS-00" ${adis00_selected}>なし(+¥0 税込)</option><option data-typename="組立済+搬入" value="ADIS-02" ${adis02_selected}>組立済+搬入(+¥${formatNumberWithComma(price.adis02_selection_selling_price)} 税込)</option>`:`<option data-typename="なし" value="ADIS-00" ${adis00_selected}>なし(+¥0 税込)</option><option data-typename="組組立済+玄関渡し" value="ADIS-01" ${adis01_selected}>組立済+玄関渡し(+¥${formatNumberWithComma(price.adis01_selection_selling_price)} 税込)</option><option data-typename="組立済+搬入" value="ADIS-02" ${adis02_selected}>組立済+搬入(+¥${formatNumberWithComma(price.adis02_selection_selling_price)} 税込)</option>`,$("#tnl_em [name=tnl_em_optionADIS]").html(selectADISHtml),$("#productPriceBox .product_adis").html($("#tnl_em [name=tnl_em_optionADIS] option:selected").text()),product_adis_service_name_write("tnl_em_optionADIS",which_selected);var modelOptionHeight=optionHeight,innerWidth;if(5==(readyMadeFlag_check=readyMadeFlag_width+readyMadeFlag_depth+readyMadeFlag_strength+readyMadeFlag_material+readyMadeFlag_color)){$("#readyMadeMessage").text("お選びのサイズ・カラーは既製品です。"),Number(optionHeight)>100&&Number(optionHeight)<198&&(modelOptionHeight=optionHeight/10),$("#tnl_em_selectedProduct").text("TNL-"+Number(modelOptionHeight)+Number(optionWidth)+"-"+optionColor);var productURL,optionCode=productURL="TNL-"+Number(modelOptionHeight)+Number(optionWidth)+"-"+optionColor,sku_no=productURL,price,check_value;if((check_value=(price=get_price(sku_no)).product_selling_price-price.product_normal_price)<0){var discountRate=(100*(1-price.product_selling_price/price.product_normal_price)).toFixed(1);$("body").addClass("time-sale"),$("div.salePrice").remove(),$("#productPriceBox .fs-c-productPrice__main__price .fs-c-price__value").text(formatNumberWithComma(price.product_normal_price)),$("#productPriceBox .fs-c-productPrice__addon").after(`<div class="fs-c-productPrice fs-c-productPrice--selling salePrice"><span class="fs-c-productPrice__main"><span class="fs-c-productPrice__main__price fs-c-price"><span class="fs-c-price__currencyMark">¥</span><span class="fs-c-price__value">${formatNumberWithComma(price.product_selling_price)}</span></span></span><span class="fs-c-productPrice__addon"><span class="priceOffValue">${discountRate}% OFF</span><span class="fs-c-productPrice__addon__label">税込</span></span></div>`)}else $("body").removeClass("time-sale"),$("div.salePrice").remove(),$("#productPriceBox .fs-c-productPrice__main__price .fs-c-price__value").text(formatNumberWithComma(price.product_selling_price));$("#productPriceBox .fs-c-productPointDisplay__quantity").text(Math.round(price.product_selling_price/100));var html='<form action="https://shirai-store.net/p/cart/add" method="post"><div style="display:none"><input type="hidden" name="products['+productURL+'].productNo" value="'+productURL+'"><input type="hidden" name="products['+productURL+'].productOptionsWithPrice[1].id" value="1"><select name="products['+productURL+'].productOptionsWithPrice[1].value"><option value="'+which_selected+'"></option></select><input name="products['+productURL+'].quantity" type="text" value="1" size="5"></div><button type="submit">カートに入れる</button></form>'}else{$("#readyMadeMessage").text(""),$("#tnl_selectedProductButton").css("display","none"),$("#tnl_em_selectedProductButton").css("display","block"),$(".fs-c-productOption.unusable").css("display","block");var productURL="TNL-EM"+optionHeight+optionWidth+optionDepth,optionCode="TNL-EM"+optionHeight+optionWidth+optionDepth+optionStrength+optionMaterial;$("#tnl_em_selectedProduct").text(optionCode+"-"+optionColor);var html='<form action="https://shirai-store.net/p/cart/add" method="post"><div style="display:none"><input type="hidden" name="products['+productURL+'].productNo" value="'+productURL+'"><input type="hidden" name="products['+productURL+'].productOptionsWithPrice[1].id" value="1"><select name="products['+productURL+'].productOptionsWithPrice[1].value"><option value="'+optionCode+'"></option></select><input type="hidden" name="products['+productURL+'].productOptionsWithPrice[2].id" value="2"><select name="products['+productURL+'].productOptionsWithPrice[2].value"><option value="'+optionColor+'"></option></select><input type="hidden" name="products['+productURL+'].productOptionsWithPrice[3].id" value="3"><select name="products['+productURL+'].productOptionsWithPrice[3].value"><option value="'+optionADIS+'"></option></select><input name="products['+productURL+'].quantity" type="text" value="1" size="5"></div><button type="submit">カートに入れる</button></form>',check_value;if((check_value=price.product_selection_selling_price-price.product_selection_normal_price)<0){var discountRate=(100*(1-price.product_selection_selling_price/price.product_selection_normal_price)).toFixed(1);$("body").addClass("time-sale"),$("div.salePrice").remove(),$("#productPriceBox .fs-c-productPrice__main__price .fs-c-price__value").text(formatNumberWithComma(price.product_selection_normal_price)),$("#productPriceBox .fs-c-productPrice__addon").after(`<div class="fs-c-productPrice fs-c-productPrice--selling salePrice"><span class="fs-c-productPrice__main"><span class="fs-c-productPrice__main__price fs-c-price"><span class="fs-c-price__currencyMark">¥</span><span class="fs-c-price__value">${formatNumberWithComma(price.product_selection_selling_price)}</span></span></span><span class="fs-c-productPrice__addon"><span class="priceOffValue">${discountRate}% OFF</span><span class="fs-c-productPrice__addon__label">税込</span></span></div>`)}else $("body").removeClass("time-sale"),$("div.salePrice").remove(),$("#productPriceBox .fs-c-productPrice__main__price .fs-c-price__value").text(formatNumberWithComma(price.product_selection_normal_price));$("#productPriceBox .fs-c-productPointDisplay__quantity").text(Math.round(price.product_selection_selling_price/100))}$(".fs-c-productPostage .fs-c-price__value").text(formatNumberWithComma(price.postage)),$("#tnl_em_selectedProductButton").html(html);var innerHeight=Number(optionHeight)-11.1,innerDepth;if("A"==optionDepth?innerDepth="16.7":"M"==optionDepth?innerDepth="26.7":"F"==optionDepth&&(innerDepth="41.7"),optionWidth>=71)var innerSizeHTML=`【内寸】高さ:${innerHeight}cm　幅左:${innerWidth=(Number(optionWidth)-5.4)/2}cm 幅右:${innerWidth}cm　奥行:${innerDepth}cm`;else var innerSizeHTML=`【内寸】高さ:${innerHeight}cm　幅:${innerWidth=Number(optionWidth)-3.6}cm　奥行:${innerDepth}cm`;$("#tnl_em_selectedProduct-innerSize").html(innerSizeHTML)}tnl_em_select_write(),adis_caution_slide(),$('#tnl_em input[type="radio"],#tnl_em select').change((function(){tnl_em_select_write()}))}}function tnl_emu_select(){if($("#tnl_emu").length){tnl_emu_select_write(),adis_caution_slide();var paramWidth=getParam("w"),paramDepth=getParam("d"),paramColor=getParam("c");if(null!=paramWidth){var paramWidth=("000"+paramWidth).slice(-3);$("select[name=tnl_emu_optionWidth]").val(paramWidth),$("input[name=tnl_emu_optionDepth][value="+paramDepth.toUpperCase()+"]").prop("checked",!0),$("input[name=tnl_emu_optionColor][value="+paramColor.toUpperCase()+"]").prop("checked",!0)}function tnl_emu_select_write(priceArray){var optionWidth=$("#tnl_emu [name=tnl_emu_optionWidth]").val(),optionDepth=$("#tnl_emu [name=tnl_emu_optionDepth]:checked").val(),optionDepthName=$("#tnl_emu [name=tnl_emu_optionDepth]:checked").data("typename"),optionMaterial=$("#tnl_emu [name=tnl_emu_optionMaterial]:checked").val(),optionMaterialName=$("#tnl_emu [name=tnl_emu_optionMaterial]:checked").data("typename"),optionColor=$("#tnl_emu [name=tnl_emu_optionColor]:checked").val(),optionColorName=$("#tnl_emu [name=tnl_emu_optionColor]:checked").data("colorname"),optionColor_length=$("#tnl_emu input[name=tnl_emu_optionColor]").length,optionADIS=$("#tnl_emu [name=tnl_emu_optionADIS]").val(),optionADISName=$("#tnl_emu [name=tnl_emu_optionADIS] option:selected").data("typename"),arraySizeRange,arraySizeRangeValue=["015_034","035_044","045_060","061_070","071_080","081_090"][$("#tnl_emu [name=tnl_emu_optionWidth] option:selected").data("digit2")-1],productSizeImage=0,sku_no="TNL-EM035"+optionWidth+"U"+optionDepth+optionMaterial;if(optionColor=$("#tnl_emu [name=tnl_emu_optionColor]:checked").val(),optionColorName=$("#tnl_emu [name=tnl_emu_optionColor]:checked").data("colorname"),"M"==optionDepth&&$("#tnl_emu input[name=tnl_emu_optionColor]").parent("label").css("display","block"),"F2"==optionMaterial)$("#tnl_emu input[name=tnl_emu_optionColor]").parent("label").css("display","block");else{for(var i=0;i<=optionColor_length;i++)1==i||3==i||5==i?$("#tnl_emu input[name=tnl_emu_optionColor]").eq(i).parent("label").css("display","block"):$("#tnl_emu input[name=tnl_emu_optionColor]").eq(i).parent("label").css("display","none");$("#tnl_emu input[name=tnl_emu_optionColor]").each((function(){"NA"==optionColor||"DK"==optionColor||"WH"==optionColor||$("#tnl_emu input[name=tnl_emu_optionColor]:eq(1)").prop("checked",!0)})),optionColor=$("#tnl_emu [name=tnl_emu_optionColor]:checked").val(),optionColorName=$("#tnl_emu [name=tnl_emu_optionColor]:checked").data("colorname")}switch(arraySizeRangeValue){case"015_034":productSizeImage=31;break;case"035_044":productSizeImage=44;break;case"045_060":productSizeImage=59;break;case"061_070":productSizeImage=67;break;case"071_080":productSizeImage=77;break;case"081_090":productSizeImage=87}if($("#tnl_emu_selectedProductImage").html('<img src="/assets/img/product/sizeOrder/tnl-em/TNL-EMU'+arraySizeRangeValue+optionDepth+"-"+optionColor+'.jpg">'),$("#tnl_emu_selectedProductImageText").html("<p>※画像は横幅"+productSizeImage+"cmです</p>"),$("#tnl_emu_selectedProductWidthImage").html('<img src="/assets/img/product/sizeOrder/tnl-em/tnl-em_width'+arraySizeRangeValue+'.png">'),$("#tnl_emu_selectedWidth").text(Number(optionWidth)+"cm"),$("#tnl_emu_selectedDepth").text(optionDepthName),$("#tnl_emu_selectedMaterial").text(optionMaterialName),$("#tnl_emu_selectedADIS").text(optionADISName),"NA"==optionColor||"NB"==optionColor||"WH"==optionColor||"WT"==optionColor||"GY"==optionColor||"LW"==optionColor)var optionTextInversion="textColorInversion";else var optionTextInversion="";$("#tnl_emu_selectedColor").html('<img src="/assets/img/product/sizeOrder/tnl-em/thum/tnl-em_color_'+optionColor.toLowerCase()+'_thum.jpg"><span class="colorName '+optionTextInversion+'">'+optionColorName+"</span>"),$("#tnl_emu_selectedProduct").text("TNL-EM035"+optionWidth+"U"+optionDepth+optionMaterial+"-"+optionColor);var productURL="TNL-EMU"+optionWidth+optionDepth,optionCode="TNL-EM035"+optionWidth+"U"+optionDepth+optionMaterial,price=get_selection_price(sku_no),check_value;if(price.product_selection_selling_price-price.product_selection_normal_price<0){var discountRate=(100*(1-price.product_selection_selling_price/price.product_selection_normal_price)).toFixed(1);$("body").addClass("time-sale"),$("div.salePrice").remove(),$("#productPriceBox .fs-c-price__value").text(formatNumberWithComma(price.product_selection_normal_price)),$("#productPriceBox .fs-c-productPrice__addon").after(`<div class="fs-c-productPrice fs-c-productPrice--selling salePrice"><span class="fs-c-productPrice__main"><span class="fs-c-productPrice__main__price fs-c-price"><span class="fs-c-price__currencyMark">¥</span><span class="fs-c-price__value">${formatNumberWithComma(price.product_selection_selling_price)}</span></span></span><span class="fs-c-productPrice__addon"><span class="priceOffValue">${discountRate}% OFF</span><span class="fs-c-productPrice__addon__label">税込</span></span></div>`)}else $("body").removeClass("time-sale"),$("div.salePrice").remove(),$("#productPriceBox .fs-c-price__value").text(formatNumberWithComma(price.product_selection_selling_price));$("#productPriceBox .fs-c-productPointDisplay__quantity").text(Math.round(price.product_selection_selling_price/100)),$(".fs-c-productPostage .fs-c-price__value").text(formatNumberWithComma(price.postage));var which_selected=$('select[name="tnl_emu_optionADIS"] option:selected').val(),adis00_selected="",adis01_selected="",adis02_selected="",adis_name=$('select[name="tnl_emu_optionADIS"] option:selected').text();"ADIS-00"==which_selected?(adis00_selected="selected",$(".product_adis").text("")):"ADIS-01"==which_selected?(adis01_selected="selected",$(".product_adis").text(adis_name)):"ADIS-02"==which_selected&&(adis02_selected="selected",$(".product_adis").text(adis_name));var selectADISHtml=`<option data-typename="なし" value="ADIS-00" ${adis00_selected}>なし(+¥0 税込)</option><option data-typename="組組立済+玄関渡し" value="ADIS-01" ${adis01_selected}>組立済+玄関渡し(+¥${formatNumberWithComma(price.adis01_selection_selling_price)} 税込)</option><option data-typename="組立済+搬入" value="ADIS-02" ${adis02_selected}>組立済+搬入(+¥${formatNumberWithComma(price.adis02_selection_selling_price)} 税込)</option>`,name;$("#tnl_emu [name=tnl_emu_optionADIS]").html(selectADISHtml),$("#productPriceBox .product_adis").html($("#tnl_emu [name=tnl_emu_optionADIS] option:selected").text()),product_adis_service_name_write("tnl_emu_optionADIS",which_selected);var html='<form action="https://shirai-store.net/p/cart/add" method="post"><div style="display:none"><input type="hidden" name="products['+productURL+'].productNo" value="'+productURL+'"><input type="hidden" name="products['+productURL+'].productOptionsWithPrice[1].id" value="1"><select name="products['+productURL+'].productOptionsWithPrice[1].value"><option value="'+optionCode+'"></option></select><input type="hidden" name="products['+productURL+'].productOptionsWithPrice[2].id" value="2"><select name="products['+productURL+'].productOptionsWithPrice[2].value"><option value="'+optionColor+'"></option></select><input type="hidden" name="products['+productURL+'].productOptionsWithPrice[3].id" value="3"><select name="products['+productURL+'].productOptionsWithPrice[3].value"><option value="'+optionADIS+'"></option></select><input name="products['+productURL+'].quantity" type="text" value="1" size="5"></div><button type="submit">カートに入れる</button></form>',innerWidth,innerDepth;if($("#tnl_emu_selectedProductButton").html(html),"A"==optionDepth?innerDepth="17.0":"M"==optionDepth?innerDepth="27.0":"F"==optionDepth&&(innerDepth="42.0"),optionWidth>=71)var innerSizeHTML=`【内寸】高さ:25.4cm　幅左:${innerWidth=(Number(optionWidth)-5.4)/2}cm 幅右:${innerWidth}cm　奥行:${innerDepth}cm`;else var innerSizeHTML=`【内寸】高さ:25.4cm　幅:${innerWidth=Number(optionWidth)-3.6}cm　奥行:${innerDepth}cm`;$("#tnl_emu_selectedProduct-innerSize").html(innerSizeHTML)}$('#tnl_emu input[type="radio"],#tnl_emu select').change((function(){tnl_emu_select_write()}))}}function tnl_emts_select(){if($("#tnl_emts").length){function tnl_emts_select_write(priceArray){var readyMadeFlag_check,readyMadeFlag_width=0,readyMadeFlag_depth=0,readyMadeFlag_strength=0,readyMadeFlag_material=0,readyMadeFlag_color=0,optionWidth=$("#tnl_emts [name=tnl_emts_optionWidth]").val(),optionDepth=$("#tnl_emts [name=tnl_emts_optionDepth]:checked").val(),optionDepthName=$("#tnl_emts [name=tnl_emts_optionDepth]:checked").data("typename"),optionStrength=$("#tnl_emts [name=tnl_emts_optionStrength]:checked").val(),optionStrengthName=$("#tnl_emts [name=tnl_emts_optionStrength]:checked").data("typename"),optionMaterial=$("#tnl_emts [name=tnl_emts_optionMaterial]:checked").val(),optionMaterialName=$("#tnl_emts [name=tnl_emts_optionMaterial]:checked").data("typename"),optionColor=$("#tnl_emts [name=tnl_emts_optionColor]:checked").val(),optionColorName=$("#tnl_emts [name=tnl_emts_optionColor]:checked").data("colorname"),optionColor_length=$("#tnl_emts input[name=tnl_emts_optionColor]").length,arraySizeRange,arraySizeRangeValue=["015_034","035_044","045_060","061_070","071_080","081_090"][$("#tnl_emts [name=tnl_emts_optionWidth] option:selected").data("digit2")-1],productSizeImage=0,sku_no="TNL-EM"+optionStrength+optionWidth+optionDepth+optionMaterial;if(31!=optionWidth&&44!=optionWidth&&59!=optionWidth&&87!=optionWidth||(readyMadeFlag_width=1),"M"==optionDepth?(readyMadeFlag_depth=1,$("#tnl_emts input[name=tnl_emts_optionColor]").parent("label").css("display","block")):readyMadeFlag_depth=0,"T"==optionStrength?(readyMadeFlag_strength=1,$("#tnl_emts input[name=tnl_emts_optionColor]").parent("label").css("display","block")):readyMadeFlag_strength=0,"F2"==optionMaterial)readyMadeFlag_material=1,$("#tnl_emts input[name=tnl_emts_optionColor]").parent("label").css("display","block");else{readyMadeFlag_material=0;for(var i=0;i<=optionColor_length;i++)1==i||3==i||5==i?$("#tnl_emts input[name=tnl_emts_optionColor]").eq(i).parent("label").css("display","block"):$("#tnl_emts input[name=tnl_emts_optionColor]").eq(i).parent("label").css("display","none");$("#tnl_emts input[name=tnl_emts_optionColor]").each((function(){"NA"==optionColor||"DK"==optionColor||"WH"==optionColor||$("#tnl_emts input[name=tnl_emts_optionColor]:eq(1)").prop("checked",!0)})),optionColor=$("#tnl_emts [name=tnl_emts_optionColor]:checked").val(),optionColorName=$("#tnl_emts [name=tnl_emts_optionColor]:checked").data("colorname")}switch("NA"!=optionColor&&"DK"!=optionColor&&"WH"!=optionColor||(readyMadeFlag_color=1),arraySizeRangeValue){case"015_034":productSizeImage=31;break;case"035_044":productSizeImage=44;break;case"045_060":productSizeImage=59;break;case"061_070":productSizeImage=67;break;case"071_080":productSizeImage=77;break;case"081_090":productSizeImage=87}if($("#tnl_emts_selectedProductImage").html('<img src="/assets/img/product/sizeOrder/tnl-em/TNL-EMTS'+arraySizeRangeValue+optionDepth+"-"+optionColor+'.jpg">'),$("#tnl_emts_selectedProductImageText").html("<p>※画像はタナリオ本体の横幅"+productSizeImage+"cm用です</p>"),$("#tnl_emts_selectedProductWidthImage").html('<img src="/assets/img/product/sizeOrder/tnl-em/tnl-emts_width'+arraySizeRangeValue+'_rev2.png">'),$("#tnl_emts_selectedWidth").text(Number(optionWidth)+"cm"),$("#tnl_emts_selectedDepth").text(optionDepthName),$("#tnl_emts_selectedStrength").text(optionStrengthName),$("#tnl_emts_selectedMaterial").text(optionMaterialName),"NA"==optionColor||"NB"==optionColor||"WH"==optionColor||"WT"==optionColor||"GY"==optionColor||"LW"==optionColor)var optionTextInversion="textColorInversion";else var optionTextInversion="";if($("#tnl_emts_selectedColor").html('<img src="/assets/img/product/sizeOrder/tnl-em/thum/tnl-em_color_'+optionColor.toLowerCase()+'_thum.jpg"><span class="colorName '+optionTextInversion+'">'+optionColorName+"</span>"),5==(readyMadeFlag_check=readyMadeFlag_width+readyMadeFlag_depth+readyMadeFlag_strength+readyMadeFlag_material+readyMadeFlag_color)){$("#tnl_emts_selectedProduct").text("TNL-T"+Number(optionWidth)+"A-"+optionColor),$("#readyMadeMessage").text("お選びのサイズ・カラーは既製品です。");var productURL,optionCode=productURL="TNL-T"+Number(optionWidth)+"A-"+optionColor,price=get_price(sku_no=productURL);$("#productPriceBox .fs-c-price__value").text(formatNumberWithComma(price.product_selling_price)),$("#productPriceBox .fs-c-productPointDisplay__quantity").text(Math.round(price.product_selling_price/100)),$(".fs-c-productPostage .fs-c-price__value").text(formatNumberWithComma(price.postage));var html='<form action="https://shirai-store.net/p/cart/add" method="post"><div style="display:none"><input type="hidden" name="products['+productURL+'].productNo" value="'+productURL+'"><input name="products['+productURL+'].quantity" type="text" value="1" size="5"></div><button type="submit">カートに入れる</button></form>'}else{$("#tnl_emts_selectedProduct").text("TNL-EM"+optionStrength+optionWidth+optionDepth+optionMaterial+"-"+optionColor);var price=get_selection_price(sku_no);$("#readyMadeMessage").text("");var productURL="TNL-EMTS"+optionWidth,optionCode="TNL-EM"+optionStrength+optionWidth+optionDepth+optionMaterial;$("#productPriceBox .fs-c-price__value").text(formatNumberWithComma(price.product_selection_selling_price)),$("#productPriceBox .fs-c-productPointDisplay__quantity").text(Math.round(price.product_selection_selling_price/100)),$(".fs-c-productPostage .fs-c-price__value").text(formatNumberWithComma(price.postage));var html='<form action="https://shirai-store.net/p/cart/add" method="post"><div style="display:none"><input type="hidden" name="products['+productURL+'].productNo" value="'+productURL+'"><input type="hidden" name="products['+productURL+'].productOptionsWithPrice[1].id" value="1"><select name="products['+productURL+'].productOptionsWithPrice[1].value"><option value="'+optionCode+'"></option></select><input type="hidden" name="products['+productURL+'].productOptionsWithPrice[2].id" value="2"><select name="products['+productURL+'].productOptionsWithPrice[2].value"><option value="'+optionColor+'"></option></select><input name="products['+productURL+'].quantity" type="text" value="1" size="5"></div><button type="submit">カートに入れる</button></form>'}$("#tnl_em_selectedProductButton").html(html)}tnl_emts_select_write(),adis_caution_slide(),$('#tnl_emts input[type="radio"],#tnl_emts select').change((function(){tnl_emts_select_write()}))}}function get_price(sku_no){var url="https://h15yyu8zof.execute-api.ap-northeast-1.amazonaws.com/prod/get_product_prices",params={sku_no:sku_no},response=$.ajax({type:"post",url:url,async:!1,data:JSON.stringify(params),contentType:"application/json",dataType:"json",scriptCharset:"utf-8",success:function(response){},error:function(response){}}).responseText,price;return JSON.parse(response)}function get_selection_price(sku_no){var url="https://h15yyu8zof.execute-api.ap-northeast-1.amazonaws.com/prod/get_size_order_made_prices",params={selection_sku_no:sku_no},response=$.ajax({type:"post",url:url,async:!1,data:JSON.stringify(params),contentType:"application/json",dataType:"json",scriptCharset:"utf-8",success:function(response){},error:function(response){}}).responseText,price;return JSON.parse(response)}function formatNumberWithComma(number){return number.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function product_adis_service_name_write(name,which_selected){var which_selected=$('select[name="'+name+'"] option:selected').val(),adis_name=$('select[name="'+name+'"] option:selected').text();"ADIS-00"==which_selected?(adis00_selected="selected",$(".product_adis").text("")):"ADIS-01"==which_selected?(adis01_selected="selected",$(".product_adis").text(adis_name)):"ADIS-02"==which_selected&&(adis02_selected="selected",$(".product_adis").text(adis_name)),optionName=$("select[name="+name+"]").val(),"ADIS-01"==optionName||"ADIS-02"==optionName?$(".deliveryCaution").slideDown():$(".deliveryCaution").slideUp()}function adis_caution_slide(){$("select[name=tnl_em_optionADIS]").change((function(){optionName=$(this).val(),"ADIS-01"==optionName||"ADIS-02"==optionName?$(".deliveryCaution").slideDown():$(".deliveryCaution").slideUp()}))}$((function(){tnl_em_introduction(),tnl_em_select(),tnl_emu_select(),tnl_emts_select()}));