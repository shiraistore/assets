function parseApiJson(e){if("string"!=typeof e)return e;let t=e.trim();return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t=t.replace(/\/\/[^\n\r]*/g,"").replace(/\/\*[\s\S]*?\*\//g,""),t=t.replace(/,\s*(?=[}\]])/g,""),JSON.parse(t)}function addCart(){const e=Array.from(new Set($(".addToCart").map(function(){const e=$(this).data("products");return null==e?null:String(e).trim()}).get().filter(Boolean)));if(0===e.length)return;const t=e.map(e=>e.toUpperCase());$.ajax({url:"https://h15yyu8zof.execute-api.ap-northeast-1.amazonaws.com/prod/get_product_list_add_data",type:"POST",contentType:"application/json",dataType:"text",processData:!1,headers:{Accept:"application/json"},data:JSON.stringify({skus:t})}).done(function(e){let t;try{t=parseApiJson(e)}catch(t){return void console.error("API response JSON parse failed:",t,e)}var r=[];t&&Array.isArray(t.items)?r=t.items:t&&Array.isArray(t.data)?r=t.data:t&&Array.isArray(t.result)&&(r=t.result);const o={};r.forEach(e=>{e&&e.sku_no&&(o[String(e.sku_no).toLowerCase()]=e)}),$(".addToCart").each(function(){const e=$(this),t=e.data("products"),r=e.data("specifiedname"),i=Number(e.data("image"))||1,a=String(e.data("imagesize")||"s");if(!t)return;const n=o[String(t).toLowerCase()];if(!n)return;const s=String(n.sku_no),d=s.toUpperCase(),l=Number(n.id);let p=String(n.name||"");const c=Number(n.selling_price||0),u=Number(n.normal_price||0),S=Number(n.thumbnail_number||i),m=s.slice(0,3),b="/c/series/"+m.toLowerCase()+"/"+s.toLowerCase();r&&""!==String(r).trim()&&(p=String(r));let h="";if(c>0&&u>0&&c<u?h='<span class="mark-sale">SALE</span><span class="normalPrice">¥'+u.toLocaleString()+'（税込）</span><span class="sellingPrice">¥'+c.toLocaleString()+"（税込）</span>":c>0&&(h='<span class="sellingPrice">¥'+c.toLocaleString()+"（税込）</span>"),!Number.isFinite(l))return;const f=("000000000000"+l).slice(-12),g=("000"+Math.floor(l/100)).slice(-3),y=("00"+(S||i)).slice(-2),x="https://shiraistore.itembox.design/product/"+g+"/"+f+"/"+f+"-"+y+"-"+a+".jpg",_='<img src="'+x+'">',v='<form action="https://shirai-store.net/p/cart/add" method="post" target="_blank"><h5 class="productName">'+p+'</h5><p class="productPrice"><span>price</span>'+h+'</p><input type="hidden" name="products['+d+'].productNo" value="'+d+'"/><h6>数量</h6><div class="cartBlock"><select name="products['+d+'].quantity" class="quantitySelect"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select><button type="submit">カートに入れる</button></div></form><div class=""><a target="_blank" href="'+b+'">商品詳細を見る</a></div>';e.find(".addToCartImage").empty().prepend(_),e.find(".addToCartInner").empty().prepend(v)}),$(".quantitySelect").on("change",function(){const e=$(this).val();$(this).closest(".cartBlock").find(".quantityInput").val(e)})}).fail(function(e,t,r){console.error("get_product_list_add_data API error:",t,r,e&&e.responseText)})}$(function(){addCart()});var productSlider_option={infiniteLoop:!1,pager:!1,hideControlOnEnd:!0,touchEnabled:!1,minSlides:5,maxSlides:5,slideWidth:203,slideMargin:8},bxslider1=$(".bxslider1").bxSlider(productSlider_option),bxslider2=$(".bxslider2").bxSlider(productSlider_option),bxslider3=$(".bxslider3").bxSlider(productSlider_option),bxslider4=$(".bxslider4").bxSlider(productSlider_option);$(window).on("load resize",function(){var e=$(window).width();$(".bxslider").each(function(){e<=1200?(bxslider1.destroySlider(),bxslider2.destroySlider(),bxslider3.destroySlider(),bxslider4.destroySlider(),$(".productSlider").each(function(){$(this).addClass("destroy")})):(bxslider1.reloadSlider(productSlider_option),bxslider2.reloadSlider(productSlider_option),bxslider3.reloadSlider(productSlider_option),bxslider4.reloadSlider(productSlider_option),$(".productSlider").each(function(){$(this).removeClass("destroy")}))})});